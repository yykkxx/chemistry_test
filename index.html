
<!-- chemistry_challenge_contest/frontend/index.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>化学挑战赛</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
  <link href="https://fonts.loli.net/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* 确保提交按钮始终可见 */
    #submit-btn {
      display: inline-flex !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }
    #submit-btn.hidden {
      display: none !important;
    }
    #submit-btn:disabled {
      opacity: 0.5 !important;
      cursor: not-allowed !important;
    }
  </style>
</head>
<body class="text-white">
  <canvas id="particles" class="particles"></canvas>
  
  <div class="container mx-auto px-4 py-8">
    <header class="text-center mb-8">
      <h1 class="text-4xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">
        化学挑战赛
      </h1>
      <p class="text-gray-300">测试你的化学知识，挑战不同难度题目</p>
    </header>

    <div class="flex flex-col lg:flex-row gap-6">
      <!-- 左侧控制面板 -->
      <div class="w-full lg:w-1/4 space-y-6">
        <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
          <h2 class="text-xl font-semibold mb-4">游戏控制</h2>
          
          <div class="mb-4">
            <label class="block text-sm font-medium mb-2">选择难度</label>
            <div class="grid grid-cols-2 gap-2">
              <button id="easy-btn" class="difficulty-btn bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-lg">
                初级
              </button>
              <button id="medium-btn" class="difficulty-btn bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
                中级
              </button>
              <button id="hard-btn" class="difficulty-btn bg-red-500 hover:bg-red-600 text-white py-2 px-4 rounded-lg">
                高级
              </button>
              <button id="expert-btn" class="difficulty-btn bg-purple-500 hover:bg-purple-600 text-white py-2 px-4 rounded-lg">
                专家
              </button>
            </div>
            <div class="mt-3">
              <label class="unlimited-label">
                <input type="checkbox" id="unlimited-checkbox" class="unlimited-checkbox">
                <span>无限时间模式</span>
              </label>
            </div>
          </div>

          <div class="mb-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm font-medium">剩余时间</span>
              <span id="timer" class="font-mono text-xl bg-gray-700 px-3 py-1 rounded-lg timer-pulse">60</span>
            </div>
            <div id="timer-container" class="w-full bg-gray-700 rounded-full h-2.5">
              <div id="timer-bar" class="bg-red-500 h-2.5 rounded-full transition-all duration-300" style="width: 100%"></div>
            </div>
          </div>

          <div class="mb-4">
            <div class="flex justify-between items-center">
              <span class="text-sm font-medium">当前积分</span>
              <span id="score" class="font-mono text-xl">0</span>
            </div>
          </div>

          <div class="mb-4">
            <div class="flex justify-between items-center">
              <span class="text-sm font-medium">最高记录</span>
              <span id="high-score" class="font-mono text-xl">0</span>
            </div>
          </div>
        </div>

        <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
          <h2 class="text-xl font-semibold mb-4">排行榜</h2>
          <div class="text-center py-8 text-gray-500">
            正在开发中
          </div>
        </div>
      </div>

      <!-- 右侧题目区域 -->
      <div class="w-full lg:w-3/4">
        <div id="question-container" class="question-card rounded-xl p-6 shadow-lg min-h-64 flex flex-col items-center justify-center relative">
          <div class="text-center text-gray-400">
            <p class="text-2xl">👨‍🔬</p>
            <p>请选择难度开始挑战</p>
          </div>
          <div id="question-actions" class="question-actions">
            <button id="submit-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg transition">
              提交答案
            </button>
            <button id="next-question-btn" class="bg-indigo-600 hover:bg-indigo-700 text-white py-2 px-4 rounded-lg transition hidden">
              下一题
            </button>
          </div>
        </div>

        <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
          <!-- 选项将通过JS动态生成 -->
        </div>

        <div id="explanation-container" class="mt-6 bg-gray-800 rounded-xl p-6 hidden">
          <h3 class="text-lg font-semibold mb-2">答案解析</h3>
          <p id="explanation-text" class="text-gray-300"></p>
        </div>
      </div>
    </div>
  </div>

  <script src="js/questions.js"></script>
  <script src="js/game.js"></script>
  <script>
    // 粒子效果
    function initParticles() {
      const canvas = document.getElementById('particles');
      const ctx = canvas.getContext('2d');
      
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      
      const particles = [];
      const particleCount = Math.floor(window.innerWidth / 10);
      
      for (let i = 0; i < particleCount; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          size: Math.random() * 2 + 1,
          speedX: Math.random() * 0.5 - 0.25,
          speedY: Math.random() * 0.5 - 0.25,
          color: `rgba(255, 255, 255, ${Math.random() * 0.5 + 0.1})`
        });
      }
      
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach(particle => {
          ctx.fillStyle = particle.color;
          ctx.beginPath();
          ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
          ctx.fill();
          
          particle.x += particle.speedX;
          particle.y += particle.speedY;
          
          if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;
          if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;
        });
        
        requestAnimationFrame(animate);
      }
      
      animate();
      
      window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // 初始化游戏实例
      window.game = new ChemistryGame();
      
      // 绑定难度按钮点击事件
      document.getElementById('easy-btn').addEventListener('click', () => {
        const isUnlimited = document.getElementById('unlimited-checkbox').checked;
        window.game.startGame('easy', isUnlimited);
      });
      document.getElementById('medium-btn').addEventListener('click', () => {
        const isUnlimited = document.getElementById('unlimited-checkbox').checked;
        window.game.startGame('medium', isUnlimited);
      });
      document.getElementById('hard-btn').addEventListener('click', () => {
        const isUnlimited = document.getElementById('unlimited-checkbox').checked;
        window.game.startGame('hard', isUnlimited);
      });
      document.getElementById('expert-btn').addEventListener('click', () => {
        const isUnlimited = document.getElementById('unlimited-checkbox').checked;
        window.game.startGame('expert', isUnlimited);
      });
      
      // 绑定提交答案按钮
      document.getElementById('submit-btn').addEventListener('click', () => window.game.submitAnswer());
      
      // 绑定下一题按钮
      document.getElementById('next-question-btn').addEventListener('click', () => window.game.nextQuestion());
      
      // 初始化粒子效果
      initParticles();
    });
  </script>
</body>
</html>
